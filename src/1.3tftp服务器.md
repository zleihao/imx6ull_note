# 1.3、tftp服务器

tftp 命令的作用和 nfs 命令一样，都是用于通过网络下载东西到 DRAM 中，只是 tftp 命令使用的 TFTP 协议， Ubuntu 主机作为 TFTP 服务器。因此需要在 Ubuntu 上搭建 TFTP 服务器，需要安装 tftp-hpa 和 tftpd-hpa，命令如下：

```bash
sudo apt-get install tftp-hpa tftpd-hpa
sudo apt-get install xinetd
```

和 NFS 一样， TFTP 也需要一个文件夹来存放文件，在用户目录下新建一个目录，命令如下：

```bash
sudo mkdir /home/hao/linux/tftpboot
sudo chmod 777 /home/hao/linux/tftpboot
```

这 样 我 就 在 我 的 电 脑 上 创 建 了 一 个 名 为 tftpboot 的 目 录 ( 文 件 夹 ) ， 路 径 为/home/hao/linux/tftpboot。注意！我们要给 tftpboot 文件夹权限，否则的话 uboot 不能从tftpboot 文件夹里面下载文件。

最后配置 tftp，安装完成以后新建文件/etc/xinetd.d/tftp， 如果没有/etc/xinetd.d 目录的话自行创建， 然后在里面输入如下内容：

```bash
server tftp
{
  socket_type = dgram
  protocol = udp
  wait = yes
  user = root
  server = /usr/sbin/in.tftpd
  server_args = -s /home/hao/linux/tftpboot/
  disable = no
  per_source = 11
  cps = 100 2
  flags = IPv4
}
```

完了以后启动 tftp 服务，命令如下：

```bash
sudo service tftpd-hpa start
```

打开/etc/default/tftpd-hpa 文件，将其修改为如下所示内容：

```bash
# /etc/default/tftpd-hpa
TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/home/hao/linux/tftpboot"
TFTP_ADDRESS=":69"
TFTP_OPTIONS="-l -c -s"
```

TFTP_DIRECTORY 就是我们上面创建的 tftp 文件夹目录，以后我们就将所有需要通过TFTP 传输的文件都放到这个文件夹里面，并且要给予这些文件相应的权限。

最后输入如下命令， 重启 tftp 服务器:

```bash
sudo service tftpd-hpa restart
```